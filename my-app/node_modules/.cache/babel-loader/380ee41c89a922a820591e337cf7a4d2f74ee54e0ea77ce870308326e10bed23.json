{"ast":null,"code":"import React,{useContext}from'react';import{useCart}from'../CartContext';import{AuthContext}from'../auth';import'./Cart.css';// Import your CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const{cartItems,totalPrice,removeCartItem}=useCart();const{user}=useContext(AuthContext);const createOrder=async()=>{if(!user){console.log('User not logged in. Redirecting to login page...');return;}const clientDetails={name:user.name,address:user.address};const orderData={client:clientDetails,cartItems:cartItems,totalPrice:totalPrice};try{const response=await fetch('http://127.0.0.1:5000/api/v1/orders',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(orderData)});if(response.ok){const emailData={client:clientDetails,orderItems:cartItems,totalPrice:totalPrice};try{const emailResponse=await fetch('http://127.0.0.1:5000/api/v1/notification/send-email',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(emailData)});if(emailResponse.ok){console.log('Email notification sent successfully.');}else{console.error('Failed to send email notification:',emailResponse.statusText);}}catch(error){console.error('Error sending email notification:',error);}}else{console.error('Failed to create order:',response.statusText);}}catch(error){console.error('Error creating order:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cart\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"cart-list\",children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"span\",{children:item.price}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeCartItem(item.id),className:\"remove-button\",children:\"Remove\"})]},index))}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: \",totalPrice]}),/*#__PURE__*/_jsx(\"button\",{onClick:createOrder,children:\"Order\"})]});};export default Cart;","map":{"version":3,"names":["React","useContext","useCart","AuthContext","jsx","_jsx","jsxs","_jsxs","Cart","cartItems","totalPrice","removeCartItem","user","createOrder","console","log","clientDetails","name","address","orderData","client","response","fetch","method","headers","body","JSON","stringify","ok","emailData","orderItems","emailResponse","error","statusText","className","children","map","item","index","price","onClick","id"],"sources":["C:/Users/ANITAH/Desktop/my-app/src/Component/Pages/Cart.js"],"sourcesContent":["import React, { useContext } from 'react';\r\nimport { useCart } from '../CartContext';\r\nimport { AuthContext } from '../auth';\r\nimport './Cart.css'; // Import your CSS file\r\n\r\nconst Cart = () => {\r\n  const { cartItems, totalPrice, removeCartItem } = useCart();\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const createOrder = async () => {\r\n    if (!user) {\r\n      console.log('User not logged in. Redirecting to login page...');\r\n      return;\r\n    }\r\n\r\n    const clientDetails = {\r\n      name: user.name,\r\n      address: user.address\r\n    };\r\n\r\n    const orderData = {\r\n      client: clientDetails,\r\n      cartItems: cartItems,\r\n      totalPrice: totalPrice\r\n    };\r\n\r\n    try {\r\n      const response = await fetch('http://127.0.0.1:5000/api/v1/orders', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(orderData)\r\n      });\r\n\r\n      if (response.ok) {\r\n        const emailData = {\r\n          client: clientDetails,\r\n          orderItems: cartItems,\r\n          totalPrice: totalPrice\r\n        };\r\n\r\n        try {\r\n          const emailResponse = await fetch('http://127.0.0.1:5000/api/v1/notification/send-email', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(emailData)\r\n          });\r\n\r\n          if (emailResponse.ok) {\r\n            console.log('Email notification sent successfully.');\r\n          } else {\r\n            console.error('Failed to send email notification:', emailResponse.statusText);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error sending email notification:', error);\r\n        }\r\n      } else {\r\n        console.error('Failed to create order:', response.statusText);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating order:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"cart\">\r\n      <h2>Cart</h2>\r\n      <ul className=\"cart-list\">\r\n        {cartItems.map((item, index) => (\r\n          <li key={index} className=\"cart-item\">\r\n            <span>{item.name}</span>\r\n            <span>{item.price}</span>\r\n            <button onClick={() => removeCartItem(item.id)} className=\"remove-button\">Remove</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <p>Total Price: {totalPrice}</p>\r\n      <button onClick={createOrder}>Order</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}